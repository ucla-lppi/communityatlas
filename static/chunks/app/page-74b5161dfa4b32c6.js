(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2988:function(e,t,r){Promise.resolve().then(r.bind(r,2999))},2999:function(e,t,r){"use strict";r.d(t,{default:function(){return p}});var o=r(7437),a=r(2265),s=r(5677),n=r(3293);function l(e){let{data:t}=e,r=(0,a.useRef)(null),s=e=>t.filter(t=>t.type===e).map(e=>({year:parseInt(e.year,10),value:parseFloat(e.count)})),n=["Demographics","Extreme Heat","Exposure to Pollution Burden"].map(e=>{var t,r;let o=s(e),a=[...new Set(o.map(e=>e.year))].sort((e,t)=>t-e),n=a[0],l=a[1],i=(null===(t=o.find(e=>e.year===n))||void 0===t?void 0:t.value)||0,c=(null===(r=o.find(e=>e.year===l))||void 0===r?void 0:r.value)||0;return{label:e,latestValue:i,previousValue:c,percentageChange:(0!==c?(i-c)/c*100:0).toFixed(2),isIncrease:i>c,latestYear:n,previousYear:l}});return(0,a.useEffect)(()=>{let e=document.querySelectorAll(".ticker"),t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let r=e.target,o=parseFloat(r.getAttribute("data-count")),a=0,s=performance.now(),n=e=>{let t=Math.min((e-s)/2e3,1);if(a=o*t,r.innerText=o%1==0?Math.ceil(a).toLocaleString():a.toFixed(2),t<1)requestAnimationFrame(n);else{r.innerText=o%1==0?o.toLocaleString():o.toFixed(2);let e=r.nextElementSibling;e&&(e.style.display="inline")}};requestAnimationFrame(n),t.unobserve(r)}})},{threshold:.1});return e.forEach(e=>t.observe(e)),()=>{t.disconnect()}},[t]),(0,o.jsxs)("div",{ref:r,className:"degree-prod relative bg-cover bg-center",style:{backgroundImage:"url(/images/lppi-bg.svg)"},children:[(0,o.jsx)("div",{className:"absolute inset-0 bg-primary opacity-95 dark:opacity-95"})," ",(0,o.jsx)("div",{className:"container mx-auto py-4 relative z-10",children:(0,o.jsxs)("h2",{className:"headline headline--medium t-center",children:["California Latino ",(0,o.jsx)("strong",{children:"Wellness Summary Statistics"})]})}),(0,o.jsx)("div",{className:"flex justify-around container mx-auto py-8 relative z-10",children:n.map((e,t)=>(0,o.jsxs)("div",{className:"box flex-1 p-4 m-2 border border-gray-300 bg-white shadow-lg text-center",children:[(0,o.jsx)("div",{className:"desc no-margin",style:{fontSize:"1.5rem"},children:e.label}),(0,o.jsx)("div",{className:"num",style:{fontSize:"3rem"},children:(0,o.jsx)("strong",{children:(0,o.jsx)("span",{className:"ticker c-blue--darker","data-count":e.latestValue,children:e.latestValue})})}),(0,o.jsx)("div",{className:"headline--small no-margin-bottom",style:{color:"#0988c9",fontSize:"1.5rem"},children:(0,o.jsxs)("strong",{children:[(0,o.jsx)("span",{className:"ticker","data-count":e.percentageChange,"data-increase":e.isIncrease,children:e.percentageChange}),"%",(0,o.jsx)("span",{className:"triangle",style:{display:"none"},children:e.isIncrease?" ▲":" ▼"})]})}),(0,o.jsxs)("div",{className:"desc c-blue no-padding",style:{color:"#0988c9",fontSize:"1rem"},children:[e.latestYear," vs. ",e.previousYear]})]},t))})]})}var i=r(3518),c=r.n(i),u=r(5853);function d(){return(0,a.useEffect)(()=>{let e=new(c()).Map({container:"map",style:"https://demotiles.maplibre.org/style.json",center:[-119.4179,36.7783],zoom:6});return e.on("load",()=>{console.log("Map loaded successfully"),(0,u.Z)("/data/ca_counties_simplified.geojson").then(t=>{console.log("GeoJSON loaded successfully",t),e.addSource("counties",{type:"geojson",data:t}),e.addLayer({id:"counties-layer",type:"fill",source:"counties",paint:{"fill-color":"#888888","fill-opacity":.4}}),e.addLayer({id:"counties-borders",type:"line",source:"counties",paint:{"line-color":"#000000","line-width":1}}),console.log("Layers added successfully"),e.on("mousemove","counties-layer",t=>{if(console.log("Mouse move event triggered"),t.features.length>0){let r=t.features[0];e.getCanvas().style.cursor="pointer";let o=t.lngLat,a=r.properties.NAME;console.log("County hovered:",a),e.getLayer("county-popup")&&(e.removeLayer("county-popup"),e.removeSource("county-popup")),e.addLayer({id:"county-popup",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[o.lng,o.lat]},properties:{name:a}}]}},layout:{"text-field":["get","name"],"text-size":12,"text-offset":[0,1.5],"text-anchor":"top"},paint:{"text-color":"#000000"}})}}),e.on("mouseleave","counties-layer",()=>{console.log("Mouse leave event triggered"),e.getCanvas().style.cursor="",e.getLayer("county-popup")&&(e.removeLayer("county-popup"),e.removeSource("county-popup"))})}).catch(e=>console.error("Error loading GeoJSON:",e))}),e.on("error",e=>{console.error("Map loading error:",e)}),()=>{e.remove()}},[]),(0,o.jsx)("div",{id:"map",className:"w-full",style:{height:"50vh",marginTop:"64px"}})}function p(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(0,s.gy)("/data/summaryData.csv").then(e=>{t(e.map(e=>({...e,count:parseFloat(e.count),year:parseInt(e.year,10)})))}).catch(e=>console.error("Error fetching data:",e))},[]),(0,a.useEffect)(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("nav",{className:"sticky top-0 z-50 flex justify-around bg-gray-800 text-white p-4",children:[(0,o.jsx)(n.rU,{to:"overview",smooth:!0,duration:800,className:"cursor-pointer",children:"Overview"}),(0,o.jsx)(n.rU,{to:"map",smooth:!0,duration:800,className:"cursor-pointer",children:"Map"}),(0,o.jsx)(n.rU,{to:"charts",smooth:!0,duration:800,className:"cursor-pointer",children:"Charts"}),(0,o.jsx)("button",{onClick:()=>i(!r),className:"cursor-pointer",children:r?"Light Mode":"Dark Mode"})]}),(0,o.jsx)("div",{id:"overview",children:(0,o.jsx)(l,{data:e})}),(0,o.jsx)(d,{}),(0,o.jsx)("div",{id:"charts",className:"w-full h-1/2 flex justify-around"})]})}r(1930)},1930:function(){}},function(e){e.O(0,[606,402,917,971,23,744],function(){return e(e.s=2988)}),_N_E=e.O()}]);