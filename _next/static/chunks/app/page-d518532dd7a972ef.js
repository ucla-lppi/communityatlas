(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6444:function(e,t,a){Promise.resolve().then(a.bind(a,7587))},7587:function(e,t,a){"use strict";a.d(t,{default:function(){return g}});var o=a(7437),s=a(2265),r=a(5677),n=a(3293);let l=e=>"".concat("/dashboard").concat(e);var i=a(8355),c=a.n(i);function d(){let e=(0,s.useRef)(null),[t,a]=(0,s.useState)([]),[r,n]=(0,s.useState)(""),[i,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)({});(0,s.useEffect)(()=>{n(document.body.classList.contains("dark-mode")?"dark-mode":""),(async()=>{let e;{let t=await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vS_YYdPSeEUznhdpsonMOsvZQ2Lq3R2SuJKSbvDwJ9vwvv5V4RMZEwKISWhWTpy_kokJy-DTWa5cJVF/pub?output=csv");e=await t.text()}c().parse(e,{header:!0,complete:e=>{a(e.data),d(!0)}})})()},[]);let p={Demographics:["White","Latino"],"Extreme Heat":["High Impact Latino","High Impact White"],"Exposure to Pollution Burden":["High Impact Latino","High Impact White"]},h=(e,a)=>t.filter(t=>t.type===e&&t.category===a).reduce((e,t)=>e+parseFloat(t.count),0),f=Object.keys(p).map(e=>{var a,o;let s=p[e].map(t=>{let a=h(e,t);return{label:t,totalValue:a}}),r=s.find(e=>e.label.includes("Latino")).totalValue,n=s.find(e=>e.label.includes("White")).totalValue,l=r-n,i=(l/n*100).toFixed(2),c=i.endsWith(".00")?parseInt(i):i,d=(null===(a=t.find(t=>t.type===e))||void 0===a?void 0:a.headerIntro)||"",u=(null===(o=t.find(t=>t.type===e))||void 0===o?void 0:o.headerIndicator)||"";return{category:e,subcategories:s,discrepancy:l,formattedDiscrepancyPercentage:c,latinoValue:r,whiteValue:n,headerIntro:d,headerIndicator:u}});(0,s.useEffect)(()=>{let e=document.querySelectorAll(".ticker"),t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let a=e.target,o=parseFloat(a.getAttribute("data-count")),s=0,r=performance.now(),n=e=>{let t=Math.min((e-r)/2e3,1);if(s=o*t,a.innerText=o%1==0?Math.ceil(s).toLocaleString():s.toFixed(2),t<1)requestAnimationFrame(n);else{a.innerText=o%1==0?o.toLocaleString():s.toFixed(2);let e=a.nextElementSibling;e&&(e.style.display="inline")}};requestAnimationFrame(n),t.unobserve(a)}})},{threshold:.1});return e.forEach(e=>t.observe(e)),()=>{t.disconnect()}},[t]),(0,s.useEffect)(()=>{i&&document.querySelectorAll(".ticker, .discrepancy, .comparison").forEach(e=>{e.classList.add("fade-in")})},[i]),(0,s.useEffect)(()=>{if(i){let e={};document.querySelectorAll(".box").forEach((t,a)=>{e[a]=t.offsetHeight}),m(e)}},[i]);let y=l("/images/lppi-bg.svg"),g=(e,t)=>(0,o.jsxs)("span",{children:[e," ",(0,o.jsx)("br",{}),(0,o.jsx)("strong",{style:{fontSize:"1.5rem"},children:t})]});return(0,o.jsxs)("div",{ref:e,className:"fancy-box relative bg-cover bg-center ".concat(r),style:{backgroundImage:"url(".concat(y,")")},children:[(0,o.jsx)("div",{className:"absolute inset-0 bg-primary opacity-95 dark:opacity-95"})," ",(0,o.jsx)("div",{className:"container mx-auto py-4 relative z-10",children:(0,o.jsxs)("h2",{className:"headline headline--medium t-center",children:["California Latino ",(0,o.jsx)("strong",{children:"Wellness Summary Statistics"})]})}),(0,o.jsx)("div",{className:"flex flex-wrap justify-around container mx-auto py-8 relative z-10 responsive-container",children:f.map((e,t)=>(0,o.jsx)("div",{className:"box flex-1 p-4 m-2 border border-gray-300 shadow-lg text-center ".concat("dark-mode"===r?"dark-box":""),style:{minHeight:i?"auto":"".concat(u[t]||200,"px")},children:i?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h3",{className:"desc no-margin ".concat("dark-mode"===r?"dark-desc":""),style:{fontSize:"1.25rem"},children:g(e.headerIntro,e.headerIndicator)}),(0,o.jsx)("h2",{className:"latino-count ".concat("dark-mode"===r?"dark-latino-count":""),style:{fontSize:"3rem",marginTop:"0.5rem"},children:(0,o.jsx)("strong",{children:(0,o.jsx)("span",{className:"ticker c-blue--darker","data-count":e.latinoValue,children:e.latinoValue})})}),(0,o.jsx)("h4",{className:"discrepancy ".concat("dark-mode"===r?"dark-discrepancy":""),style:{fontSize:"1.25rem",marginTop:"0.5rem"},children:(0,o.jsxs)("strong",{children:[(0,o.jsxs)("span",{children:[e.formattedDiscrepancyPercentage,"%"]}),(0,o.jsx)("span",{className:"triangle",style:{display:"inline",marginLeft:"0.5rem"},children:e.discrepancy>=0?"▲":"▼"})]})}),(0,o.jsx)("h6",{className:"comparison ".concat("dark-mode"===r?"dark-comparison":""),style:{fontSize:"0.875rem",marginTop:"0.5rem"},children:(0,o.jsxs)("span",{children:["(Latino ",e.latinoValue.toLocaleString()," vs White ",e.whiteValue.toLocaleString(),")"]})})]}):(0,o.jsx)("div",{className:"loading-spinner-container",children:(0,o.jsx)("div",{className:"loading-spinner"})})},t))})]})}var u=a(3518),m=a.n(u),p=a(5853);let h=e=>e.map((e,t)=>{let a,o;t<5?(a="low",o="low"):t<10?(a="medium",o="medium"):(a="high",o="high");let s=Math.floor(100*Math.random())+1;return{...e,properties:{...e.properties,extremeHeat:a,pollutionBurden:o,latinoPopulation:s,whitePopulation:100-s}}});var f={abbrev:{label:""},extremeHeat:{label:"Extreme Heat",class:!0},pollutionBurden:{label:"Pollution Burden",class:!0},latinoPopulation:{label:"Latino Population",suffix:"%"},whitePopulation:{label:"White Population",suffix:"%"}};function y(){let e=(0,s.useRef)(null),t=(0,s.useRef)(null),[a,r]=(0,s.useState)("");return(0,s.useEffect)(()=>{r(document.body.classList.contains("dark-mode")?"dark-mode":"");let a=new(m()).Map({container:e.current,style:"https://demotiles.maplibre.org/style.json",center:[-119.4179,36.7783],zoom:6,attributionControl:!1}),o=null;a.on("load",()=>{console.log("Map loaded successfully");let e=l("/data/ca_counties_simplified.geojson");(0,p.Z)(e).then(e=>{console.log("GeoJSON loaded successfully",e),e.features.forEach((e,t)=>{e.id||(e.id=e.properties.ansi||e.properties.abcode||t)}),e.features=h(e.features),a.addSource("counties",{type:"geojson",data:e}),a.addLayer({id:"counties-layer",type:"fill",source:"counties",paint:{"fill-color":"#888888","fill-opacity":.4,"fill-outline-color":"#2774AE"}}),a.addLayer({id:"counties-borders",type:"line",source:"counties",paint:{"line-color":"#000000","line-width":1}}),console.log("Layers added successfully");let s=new(m()).LngLatBounds;e.features.forEach(e=>{e.geometry.coordinates.forEach(e=>{e.forEach(e=>{s.extend(e)})})}),a.fitBounds(s,{padding:20}),a.dragPan.disable(),a.scrollZoom.disable(),a.on("mousemove","counties-layer",e=>{if(console.log("Mouse move event triggered"),e.features.length>0){let o=e.features[0];a.getCanvas().style.cursor="pointer",e.lngLat;let s=o.properties.name;console.log("County hovered:",s);let r=t.current,n="<strong>".concat(s,"</strong><br>");Object.keys(f).forEach(e=>{if(void 0!==o.properties[e]){let t=f[e],a=o.properties[e],s=t.class?a:"",r=t.suffix||"",l=t.label?"".concat(t.label,": "):"";n+="".concat(l,'<span class="').concat(s,'">').concat(a).concat(r,"</span><br>")}}),n+='<span class="c-blue"><strong>Click county for more details</strong></span>',r.innerHTML=n,r.style.display="block",r.style.left="".concat(e.point.x+10,"px"),r.style.top="".concat(e.point.y+10,"px")}}),a.on("mouseleave","counties-layer",()=>{console.log("Mouse leave event triggered"),a.getCanvas().style.cursor="",t.current.style.display="none",null!==o&&(a.setFeatureState({source:"counties",id:o},{hover:!1}),o=null)}),a.addLayer({id:"counties-highlight",type:"fill",source:"counties",paint:{"fill-color":"#FFD100","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.75,0]}})}).catch(e=>console.error("Error loading GeoJSON:",e))}),a.on("error",e=>{console.error("Map loading error:",e)});let s=new ResizeObserver(()=>{a.resize()});return s.observe(e.current),()=>{a.remove(),s.disconnect()}},[]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"text-center my-4",children:[(0,o.jsx)("div",{className:"text-3xl font-bold",children:"California County Profiles"}),(0,o.jsx)("div",{className:"text-xl text-gray-600",children:"Click to view California County Wellness Profiles"})]}),(0,o.jsx)("div",{ref:e,id:"map",className:"w-full",style:{height:"50vh",marginTop:"16px",position:"relative"},children:(0,o.jsx)("div",{ref:t,id:"popup",className:a})})]})}function g(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=l("/data/summaryData.csv");(0,r.gy)(e).then(e=>{t(e.map(e=>({...e,count:parseFloat(e.count),year:parseInt(e.year,10)})))}).catch(e=>console.error("Error fetching data:",e))},[]),(0,s.useEffect)(()=>{a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[a]),(0,o.jsxs)("div",{className:a?"dark":"",children:[(0,o.jsxs)("nav",{className:"sticky top-0 z-50 flex justify-around bg-gray-800 text-white p-4",children:[(0,o.jsx)(n.rU,{to:"overview",smooth:!0,duration:800,className:"cursor-pointer",children:"Overview"}),(0,o.jsx)(n.rU,{to:"map",smooth:!0,duration:800,className:"cursor-pointer",children:"Map"}),(0,o.jsx)(n.rU,{to:"charts",smooth:!0,duration:800,className:"cursor-pointer",children:"Charts"}),(0,o.jsx)("button",{onClick:()=>i(!a),className:"cursor-pointer",children:(0,o.jsx)("i",{className:"fas ".concat(a?"fa-sun":"fa-moon")})})]}),(0,o.jsx)("div",{id:"overview",className:"relative z-10",children:(0,o.jsx)(d,{data:e,darkMode:a})}),(0,o.jsx)("div",{id:"map",className:"relative z-0",children:(0,o.jsx)(y,{})}),(0,o.jsx)("div",{id:"charts",className:"w-full h-1/2 flex justify-around"})]})}a(1930),a(1656)},1930:function(){}},function(e){e.O(0,[606,734,402,518,971,23,744],function(){return e(e.s=6444)}),_N_E=e.O()}]);