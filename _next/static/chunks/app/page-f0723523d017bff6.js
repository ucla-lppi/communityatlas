(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6444:function(e,t,r){Promise.resolve().then(r.bind(r,7466))},7466:function(e,t,r){"use strict";r.d(t,{default:function(){return f}});var o=r(7437),s=r(2265),n=r(5677),a=r(3293);let i=e=>"".concat("/dashboard").concat(e);var l=r(8355),c=r.n(l);function d(){let e=(0,s.useRef)(null),[t,r]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{let e;{let t=await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vS_YYdPSeEUznhdpsonMOsvZQ2Lq3R2SuJKSbvDwJ9vwvv5V4RMZEwKISWhWTpy_kokJy-DTWa5cJVF/pub?output=csv");e=await t.text()}c().parse(e,{header:!0,complete:e=>{r(e.data)}})})()},[]);let n={Demographics:["White","Latino"],"Extreme Heat":["High Impact Latino","High Impact White"],"Exposure to Pollution Burden":["High Impact Latino","High Impact White"]},a=(e,r)=>t.filter(t=>t.type===e&&t.category===r).reduce((e,t)=>e+parseFloat(t.count),0),l=Object.keys(n).map(e=>{var r,o;let s=n[e].map(t=>{let r=a(e,t);return{label:t,totalValue:r}}),i=s.find(e=>e.label.includes("Latino")).totalValue,l=s.find(e=>e.label.includes("White")).totalValue,c=i-l,d=(c/l*100).toFixed(2),u=d.endsWith(".00")?parseInt(d):d,p=(null===(r=t.find(t=>t.type===e))||void 0===r?void 0:r.headerIntro)||"",h=(null===(o=t.find(t=>t.type===e))||void 0===o?void 0:o.headerIndicator)||"";return{category:e,subcategories:s,discrepancy:c,formattedDiscrepancyPercentage:u,latinoValue:i,whiteValue:l,headerIntro:p,headerIndicator:h}});(0,s.useEffect)(()=>{let e=document.querySelectorAll(".ticker"),t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let r=e.target,o=parseFloat(r.getAttribute("data-count")),s=0,n=performance.now(),a=e=>{let t=Math.min((e-n)/2e3,1);if(s=o*t,r.innerText=o%1==0?Math.ceil(s).toLocaleString():s.toFixed(2),t<1)requestAnimationFrame(a);else{r.innerText=o%1==0?o.toLocaleString():s.toFixed(2);let e=r.nextElementSibling;e&&(e.style.display="inline")}};requestAnimationFrame(a),t.unobserve(r)}})},{threshold:.1});return e.forEach(e=>t.observe(e)),()=>{t.disconnect()}},[t]);let d=i("/images/lppi-bg.svg"),u=(e,t)=>(0,o.jsxs)("span",{children:[e," ",(0,o.jsx)("br",{}),(0,o.jsx)("strong",{style:{fontSize:"1.5rem"},children:t})]});return(0,o.jsxs)("div",{ref:e,className:"degree-prod relative bg-cover bg-center",style:{backgroundImage:"url(".concat(d,")")},children:[(0,o.jsx)("div",{className:"absolute inset-0 bg-primary opacity-95 dark:opacity-95"})," ",(0,o.jsx)("div",{className:"container mx-auto py-4 relative z-10",children:(0,o.jsxs)("h2",{className:"headline headline--medium t-center",children:["California Latino ",(0,o.jsx)("strong",{children:"Wellness Summary Statistics"})]})}),(0,o.jsx)("div",{className:"flex flex-wrap justify-around container mx-auto py-8 relative z-10 responsive-container",children:l.map((e,t)=>(0,o.jsxs)("div",{className:"box flex-1 p-4 m-2 border border-gray-300 bg-white shadow-lg text-center",children:[(0,o.jsx)("h3",{className:"desc no-margin",style:{fontSize:"1.25rem",color:"#555"},children:u(e.headerIntro,e.headerIndicator)}),(0,o.jsx)("h2",{className:"latino-count",style:{fontSize:"3rem",marginTop:"0.5rem",color:"black"},children:(0,o.jsx)("strong",{children:(0,o.jsx)("span",{className:"ticker c-blue--darker","data-count":e.latinoValue,children:e.latinoValue})})}),(0,o.jsx)("h4",{className:"discrepancy",style:{fontSize:"1.25rem",marginTop:"0.5rem",color:"#2774AE"},children:(0,o.jsxs)("strong",{children:[(0,o.jsxs)("span",{children:[e.formattedDiscrepancyPercentage,"%"]}),(0,o.jsx)("span",{className:"triangle",style:{display:"inline",marginLeft:"0.5rem"},children:e.discrepancy>=0?"▲":"▼"})]})}),(0,o.jsx)("h6",{className:"comparison",style:{fontSize:"0.875rem",marginTop:"0.5rem",color:"#555"},children:(0,o.jsxs)("span",{children:["(Latino ",e.latinoValue," vs White ",e.whiteValue,")"]})})]},t))})]})}var u=r(3518),p=r.n(u),h=r(5853);function m(){let e=(0,s.useRef)(null),t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let r=new(p()).Map({container:e.current,style:"https://demotiles.maplibre.org/style.json",center:[-119.4179,36.7783],zoom:6,attributionControl:!1}),o=null;r.on("load",()=>{console.log("Map loaded successfully");let e=i("/data/ca_counties_simplified.geojson");(0,h.Z)(e).then(e=>{console.log("GeoJSON loaded successfully",e),e.features.forEach((e,t)=>{e.id||(e.id=e.properties.ansi||e.properties.abcode||t)}),r.addSource("counties",{type:"geojson",data:e}),r.addLayer({id:"counties-layer",type:"fill",source:"counties",paint:{"fill-color":"#888888","fill-opacity":.4,"fill-outline-color":"#2774AE"}}),r.addLayer({id:"counties-borders",type:"line",source:"counties",paint:{"line-color":"#000000","line-width":1}}),console.log("Layers added successfully");let s=new(p()).LngLatBounds;e.features.forEach(e=>{e.geometry.coordinates.forEach(e=>{e.forEach(e=>{s.extend(e)})})}),r.fitBounds(s,{padding:20}),r.dragPan.disable(),r.scrollZoom.disable(),r.on("mousemove","counties-layer",e=>{if(console.log("Mouse move event triggered"),e.features.length>0){let s=e.features[0];r.getCanvas().style.cursor="pointer",e.lngLat;let n=s.properties.name;console.log("County hovered:",n);let a=t.current;a.innerHTML="\n                <strong>".concat(n,"</strong><br>\n                index indicator: ").concat("Indicator summary (can be high, low)",'<br>\n                <span class="c-blue"><strong>Click county for more details</strong></span>\n              '),a.style.display="block",a.style.left="".concat(e.point.x+10,"px"),a.style.top="".concat(e.point.y+10,"px"),null!==o&&r.setFeatureState({source:"counties",id:o},{hover:!1}),o=s.id,r.setFeatureState({source:"counties",id:o},{hover:!0})}}),r.on("mouseleave","counties-layer",()=>{console.log("Mouse leave event triggered"),r.getCanvas().style.cursor="",t.current.style.display="none",null!==o&&(r.setFeatureState({source:"counties",id:o},{hover:!1}),o=null)}),r.addLayer({id:"counties-highlight",type:"fill",source:"counties",paint:{"fill-color":"#FFD100","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.75,0]}})}).catch(e=>console.error("Error loading GeoJSON:",e))}),r.on("error",e=>{console.error("Map loading error:",e)});let s=new ResizeObserver(()=>{r.resize()});return s.observe(e.current),()=>{r.remove(),s.disconnect()}},[]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"text-center my-4",children:[(0,o.jsx)("div",{className:"text-3xl font-bold",children:"California County Profiles"}),(0,o.jsx)("div",{className:"text-xl text-gray-600",children:"Click to view California County Wellness Profiles"})]}),(0,o.jsx)("div",{ref:e,id:"map",className:"w-full",style:{height:"50vh",marginTop:"16px",position:"relative"},children:(0,o.jsx)("div",{ref:t,id:"popup",style:{display:"none",position:"absolute",backgroundColor:"white",border:"1px solid black",padding:"5px",pointerEvents:"none"}})})]})}function f(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=i("/data/summaryData.csv");(0,n.gy)(e).then(e=>{t(e.map(e=>({...e,count:parseFloat(e.count),year:parseInt(e.year,10)})))}).catch(e=>console.error("Error fetching data:",e))},[]),(0,s.useEffect)(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("nav",{className:"sticky top-0 z-50 flex justify-around bg-gray-800 text-white p-4",children:[(0,o.jsx)(a.rU,{to:"overview",smooth:!0,duration:800,className:"cursor-pointer",children:"Overview"}),(0,o.jsx)(a.rU,{to:"map",smooth:!0,duration:800,className:"cursor-pointer",children:"Map"}),(0,o.jsx)(a.rU,{to:"charts",smooth:!0,duration:800,className:"cursor-pointer",children:"Charts"}),(0,o.jsx)("button",{onClick:()=>l(!r),className:"cursor-pointer",children:(0,o.jsx)("i",{className:"fas ".concat(r?"fa-sun":"fa-moon")})})]}),(0,o.jsx)("div",{id:"overview",className:"relative z-10",children:(0,o.jsx)(d,{data:e})}),(0,o.jsx)("div",{id:"map",className:"relative z-0",children:(0,o.jsx)(m,{})}),(0,o.jsx)("div",{id:"charts",className:"w-full h-1/2 flex justify-around"})]})}r(1930),r(1656)},1930:function(){}},function(e){e.O(0,[606,734,402,518,971,23,744],function(){return e(e.s=6444)}),_N_E=e.O()}]);